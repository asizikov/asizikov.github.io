<!DOCTYPE html>
<html lang="{{ or site.Language.LanguageCode site.Language.Lang }}" dir="{{ or site.Language.LanguageDirection `ltr` }}">
<head>
  {{ partial "head.html" . }}
</head>
<body>
  <header>
    {{ partial "header.html" . }}
  </header>
  <main>
    <div class="international__typo__main__layout">
      <div class="international__typo__main__layout__left"></div>
      <div class="international__typo__main__layout__right">
        <div class="international__typo__main__layout__right__content">
        {{ block "main" . }}{{ end }}
        </div>
      </div>
    </div>    
  </main>
  <footer>
    {{ partial "footer.html" . }}
  </footer>
</body>
<script>(function (d, e) { d[e] = d[e].replace("no-js", "js"); })(document.documentElement, "className");</script>
<script>
    {{ $date := now.Format "2006-01-02" }}
    {{ if .GitInfo }}
    {{ $date = .GitInfo.AuthorDate }}
    {{ end }}
    {{ with .Site.Params.GoogleAnalytics }}
        (function (i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m) })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga'); ga('create', '{{ . }}', 'auto'); ga('send', 'pageview');
    {{ end }}

    {{ $rawSw := readFile "assets/js/sw.js" }}
    {{ $buildDate := delimit (slice "const BUILD_DATE = \"" $date "\"") "" }}
    {{ $swString := delimit (slice $buildDate $rawSw) ";   " }}
    {{ $sw := $swString | resources.FromString "/sw.js" }}

    if ('serviceWorker' in navigator) {
        const buildDate = {{ $date | time.Format ":date_short" }};
        navigator.serviceWorker
            .register({{ $sw.Permalink }}, { scope: '/' })
            .then(function (registration) {
                console.log('Service Worker Registered');
            });

        navigator.serviceWorker
            .ready
            .then(function (registration) {
                console.log('Service Worker Ready');
            });
    }
</script>
</html>
